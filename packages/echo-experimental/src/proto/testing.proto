//
// Copyright 2020 DXOS.org
//

syntax = "proto3";

package dxos.echo.testing;

import "google/protobuf/any.proto";

// Augmented data from feeds.
message FeedMessage {
  string feedKey = 1;
  Envelope data = 2;
}

// Root message type.
message Envelope {
  google.protobuf.Any message = 1;
}

// Test HALO message.
message Admit {
  string feedKey = 1;
}

// Wrapper for all ECHO messages.
message ItemEnvelope {
  message VectorTimestamp {
    message Feed {
      bytes feedKey = 1;
      int32 seq = 2;
    }

    repeated Feed timestamp = 1;
  }

  string itemId = 1;
  VectorTimestamp timestamp = 2;
  google.protobuf.Any payload = 3;
}

// New item.
message ItemGenesis {
  string model = 1;
}

// Item mutation.
message ItemMutation {
  string key = 1;
  string value = 2;
}

message TestData {
  int32 data = 1;
}

message TestFeedRemove {
  string feedKey = 1;
}